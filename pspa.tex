% !TEX root = ./jwProj.tex

\subsection{The pop-switch planar algebra}

\begin{defn}\label{def:pspa}
Let the pop-switch planar algebra $\mathcal{PSPA}$ be the planar algebra generated by oriented strands modulo the following relations.
\begin{itemize}
\item The pop-switch relations
$$\input{intro/diagrams/ps3.tex} = \input{intro/diagrams/ps4.tex}, \quad
\input{intro/diagrams/ps1.tex} = \input{intro/diagrams/ps2.tex}$$
\item The bubble-bursting relation
$$\raisebox{-4pt}{\tikz \draw[->] (0,0) +(90:0.2) arc(90:460:0.2);} +
  \raisebox{-4pt}{\tikz \draw[->] (0,0) +(90:0.2) arc(460:90:0.2);} =
  (q + q^{-1}) \epsilon,$$
where $\epsilon$ denotes the empty diagram.
\end{itemize}
\end{defn}

This contains the Temperley-Lieb planar algebra; a non-oriented strand is the sum of each orientation.

We need some tools to move the diagrams around. 

Denote $n$ parallel strands oriented in the same direction
by a single oriented strand labelled $n$.
$$\input{intro/diagrams/n1a.tex} = \input{intro/diagrams/n1b.tex}.$$
If $n$ is a negative integer,
\(
\raisebox{2pt}{\begin{tikzpicture}[mystyle] \draw[->](0,-0.4) -- (0,0.4) node[inner sep=.1cm, below right]{$n$};\end{tikzpicture}}
= \,
\raisebox{2pt}{\begin{tikzpicture}[mystyle] \draw[->](0,0.4) -- (0,-0.4) node[inner sep=.1cm, above right]{$-n$};\end{tikzpicture}}
\)

Let $\iota_n$ denote $n$ vertical strands oriented up.
Let $\beta_n$ denote $n$ parallel strands
that form a bubble oriented counterclockwise.
Let $\alpha_n$ denote a $\beta_{-n}$ inside a $\beta_{n}$.
$$\iota_n = 
\raisebox{-8pt}{\tikz[scale=0.8, every node/.style={transform shape}] \draw[->](0,-0.4) -- (0,0.4) node[below right]{$n$};}
\quad 
\beta_n =
\raisebox{-4pt}{\tikz[scale=0.8, every node/.style={transform shape}] \draw[->] (0,0.7) +(10:0.2) arc(10:400:0.2) node[right]{$n$};}
\quad 
\alpha_n =
\raisebox{2pt}{\begin{tikzpicture}[mystyle]
\draw[->] (0.5,0.0)  arc(0:400:0.5) node[right]{$n$};
\draw[<-] (0.15,0.0)  arc(0:400:0.15) node[right]{$\scriptstyle{n}$};
\end{tikzpicture}}
.
$$

\begin{lem} 
\label{lem:teleport}
Suppose $x \in \mathcal{PSPA}_0$ 
and $y$ is a sequence of $2n$ vertical strands
such that $n$ are oriented up
and $n$ are oriented down.
Then $x \otimes y = y \otimes x$.
\end{lem}

\begin{proof}
Use the pop-switch relation repeatedly to create a gap
and pass $x$ through.
Then use the pop-switch relation repeatedly
to restore the original $2n$ vertical strands.
\end{proof}

\begin{lem} {\bf The multi-pop-switch relations}
The pop-switch relations hold for multiple strands.
\label{lem:multips}
$$\input{intro/diagrams/ps3ms.tex} = \input{intro/diagrams/ps4ms.tex},
\quad
\input{intro/diagrams/ps1ms.tex} = \input{intro/diagrams/ps2ms.tex}$$
\end{lem}

\begin{proof} Without loss of generality, consider the first equality.
Induct on $n$.
The case $n = 1$ is the pop-switch relations.
For the case $n = k + 1$, move the innermost $\beta_{-k}$ across two strands using the previous lemma.  Then 
use the case $n = k$, and finally the case $n = 1$.
\end{proof}

\begin{cor}\label{cor:ia}
$\iota_k\otimes \alpha_n = \iota_k$ and $\iota_{-k}\otimes \alpha_{-n} = \iota_{-k}$ for $k\geq n\geq 0$.
\end{cor}

\begin{proof}
Consider $\iota_k\otimes \alpha_n$.
Use the multi-pop-switch relation by popping the innermost $\beta_n$ of the $\alpha_n$.
Then straighten out the $\iota_n$.
The other case is similar.
\end{proof}

\begin{cor}\label{cor:ab}
$$
\raisebox{2pt}{\begin{tikzpicture}[mystyle]
\draw[->] (0.5,0.0)  arc(0:400:0.5) node[right]{$n$};
\draw[->] (0.15,0.0)  arc(0:-680:0.15) ;
\end{tikzpicture}}=\alpha_{n}\otimes\beta_{n-1}
\quad\text{ and }\quad
\raisebox{2pt}{\begin{tikzpicture}[mystyle]
\draw[->] (0.5,0.0)  arc(0:-680:0.5) node[right]{$n$};
\draw[->] (0.15,0.0)  arc(0:400:0.15) ;
\end{tikzpicture}}=\alpha_{-n}\otimes\beta_{-n+1}.
$$
\end{cor}

\begin{proof}
Start with the left side of the first equality.
Use a multi-pop-switch relation on the $n-1$ strands, as shown below.
$$
\raisebox{2pt}{\begin{tikzpicture}[mystyle]
\draw[->] (0.5,0.0)  arc(0:400:0.5) node[right]{$n$};
\draw[->] (0.15,0.0)  arc(0:-680:0.15) ;
\end{tikzpicture}}=
\raisebox{2pt}{\begin{tikzpicture}[mystyle]
\draw[->] (1.5,0.6)  arc(30:40:1.2) node[right]{$n-1$};
\draw[] (1.5,0.6)  arc(30:330:1.2) ;
\draw[->] (3.5,0.2)  arc(30:40:0.5) node[right]{$n-1$};
\draw[decoration={markings, mark=at position 0.6 with {\arrow{>}}},
        postaction={decorate}]
(3.5,0.2)  arc(30:140:0.5)  arc(-40:-140:0.6) --(1.5,0.6);
\draw[decoration={markings, mark=at position 0.7 with {\arrow{<}}},
        postaction={decorate}] 
(3.5,0.2)  arc(30:-140:0.5)arc(40:145:0.67)--(1.5,-0.6) ;
\draw[->] (0.6,0)  arc(0:400:0.4);
\draw[->] (0.35,0)  arc(0:-680:0.15) ;
\end{tikzpicture}}
=
\raisebox{2pt}{\begin{tikzpicture}[mystyle]
\draw[->] (1.5,0.6)  arc(30:40:1.2) node[right]{$n-1$};
\draw[] (1.5,0.6)  arc(30:400:1.2) ;
\draw[->] (3.5,0.2)  arc(30:40:0.5) node[right]{$n-1$};
\draw[]
(3.5,0.2)  arc(30:400:0.5);
\draw[->] (0.4,0)  arc(0:400:0.4);
\draw[->] (0.15,0)  arc(0:-680:0.15) ;
\draw[->] (0.8,0.1)  arc(0:-680:0.15) node[right]{$\scriptstyle{n-1}$};
\end{tikzpicture}}$$
By Lemma \ref{lem:teleport} we can move the $\beta_{-n+1}$ into the $\alpha_1$ to achieve the result.
$$
=
\raisebox{2pt}{\begin{tikzpicture}[mystyle]
\draw[->] (0.5,0.0)  arc(0:400:0.5) node[right]{$n$};
\draw[<-] (0.15,0.0)  arc(0:400:0.15) node[right]{$\scriptstyle{n}$};
\draw[->] (1,0.0) +(10:0.2) arc(10:400:0.2) node[right]{$n-1$};
\end{tikzpicture}}
=\alpha_{n}\otimes\beta_{n-1}
$$
The second identity is proved similarly.
\end{proof}

\begin{lem} \label{lem:oio}
$\iota_n = \beta_{-n} \otimes \iota_n \otimes \beta_n$.
\end{lem}

\begin{proof}
This follows from the multi-pop switch relations.
$$\iota_n =
\begin{tikzpicture}[mystyle] \draw[->](0,-0.4) -- (0,0.4) node[inner sep=.1cm, below right]{$\scriptstyle{n}$};\end{tikzpicture} 
=
\begin{tikzpicture}[mystyle]
\draw[->] (0,-0.6) -- (0, -0.4) arc(180:90:.2) arc(270:450:.2) arc(270:180:.2) -- (0,0.6) node[right]{$\scriptstyle{n}$};
\end{tikzpicture}
=
\begin{tikzpicture}[mystyle]
\draw[->](0,-0.4) -- (0,0.4) node[inner sep=.1cm, below right]{$\scriptstyle{n}$};
\draw[->] (0.6,0)  arc(0:400:0.15) node[right]{$\scriptstyle{n}$};
\draw[->] (-0.4,0)  arc(0:-680:0.15) node[right]{$\scriptstyle{n}$};
\end{tikzpicture}
= \beta_{-n} \otimes \iota_n \otimes \beta_n
$$

%We prove the case $n > 0$ by induction.
%If the statement is true for $n$ then
%$$\iota_{n+1} = (\beta_{-n} \otimes \iota_n \otimes \beta_n)
%\otimes (\beta_{-1} \otimes \iota_1 \otimes \beta_1).$$
%By Lemma \ref{lem:teleport},
%the bubble $\beta_{-1}$ can move inside the bubble $\beta_{-n}$.
%Similarly,
%the bubble $\beta_n$ can move inside the bubble $\beta_1$.
%We obtain $\beta_{-n-1} \otimes \iota_{n+1} \otimes \beta_{n+1}$.

%The case $n < 0$ is similar.
\end{proof}


Now we give some relations involving the Jones-Wenzl idempotents $p_n$. 
First, we need some notation for them.
 We will use a rectangle to represent $p_n$.  It should always be assumed that $p_n \in P_n^n$ even if the strands are not drawn.  


\begin{nota}
$p_n = \input{mainThm/diagrams/pna.tex} = \input{mainThm/diagrams/pnb.tex}=\input{mainThm/diagrams/pnc.tex}=\input{mainThm/diagrams/pnd.tex}$
\end{nota}

We can make use of the the fact that they are uncappable.  

\begin{lem}
\label{lem:arcMove}
\begin{tikzpicture}[mystyle]
\draw [] (-.8,.5) rectangle (.8,0.7);
\draw (-0.2,-0.2) node  {$n$};
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (-.5,.5) -- (-.5, -.5);

\arc{.5}{.4}{.3}{}{>}
\end{tikzpicture}
$=(-1)^{n+1}$
\begin{tikzpicture}[mystyle] %baseline, scale=0.8, every node/.style={transform shape}]
\draw [] (-.8,.5) rectangle (.8,0.7);
\draw (0.5,-0.2) node  {$n$};
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (.3,.5) -- (.3, -.5);

\arc{.5}{.4}{-.3}{}{<}
%\circles{.9}{0}{n}{>}
\betaP{.9}{0}{n}
\end{tikzpicture}
This relation remains true if all arrows are reversed.
\end{lem}

\begin{proof}
For the case $n = 0$,
use the fact that an unoriented cap gives zero.
For the case $n = 1$,
use the case $n = 0$ and the pop-switch relation.

For the general case,
use induction on $n$.  Start by using the case $n=k$ as follows:

\begin{align*}
\begin{tikzpicture}[mystyle]
\draw [] (-.9,.5) rectangle (.8,0.7);
\draw (-0.3,-0.2) node  {$\scriptstyle{k+1}$};
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (-.7,.5) -- (-.7, -.5);
\arc{.5}{.4}{.3}{}{>}
\end{tikzpicture}
&=
\begin{tikzpicture}[mystyle]
\draw [] (-.9,.5) rectangle (.8,0.7);
\draw (-0.3,-0.2) node  {$\scriptstyle{k}$};
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (-.5,.5) -- (-.5, -.5);
\arc{.5}{.4}{.3}{}{>}
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (-.8,.5) -- (-.8, -.5);
\end{tikzpicture}
=(-1)^{k+1}
\begin{tikzpicture}[mystyle] %baseline, scale=0.8, every node/.style={transform shape}]
\draw [] (-.9,.5) rectangle (.8,0.7);
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (-.8,.5) -- (-.8, -.5);
\draw (0.5,-0.2) node  {$\scriptstyle{k}$};
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (.3,.5) -- (.3, -.5);
\arc{.5}{.4}{-.3}{}{<}
%\circles{.9}{0}{\scriptstyle{k}}{>}
\betaP{.9}{0}{\scriptstyle{k}}
\end{tikzpicture}
 \intertext{Next use the case $n=1$, followed by Lemma \ref{lem:teleport}, to achieve the result.}
&=(-1)^{k+2}
\begin{tikzpicture}[mystyle] %baseline, scale=0.8, every node/.style={transform shape}]
\draw [] (-.9,.5) rectangle (.8,0.7);
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (-.8,.5) -- (-.8, -.5);
\draw (0.5,-0.2) node  {$\scriptstyle{k}$};
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (.3,.5) -- (.3, -.5);
\arc{.5}{.4}{-.3}{}{>}
%\circles{.9}{0}{\scriptstyle{k}}{>}
\betaP{.9}{0}{\scriptstyle{k}}
\end{tikzpicture}
=(-1)^{k+2}
\begin{tikzpicture}[mystyle] %baseline, scale=0.8, every node/.style={transform shape}]
\draw [] (-.9,.5) rectangle (1.2,0.7);
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (0,.5) -- (0, -.5);
\draw (0.7,-0.2) node  {$\scriptstyle{k}$};
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (.5,.5) -- (.5, -.5);
\draw[<-] (0.2,0) +(400:0.1) arc(440:50:0.15);
\arc{.5}{.4}{-.5}{}{<}
%\circles{1.1}{0}{\scriptstyle{k}}{>}
\betaP{1.1}{0}{\scriptstyle{k}}
\end{tikzpicture}\\
&=(-1)^{k+2}
\begin{tikzpicture}[mystyle] %baseline, scale=0.8, every node/.style={transform shape}]
\draw [] (-.9,.5) rectangle (.8,0.7);
%\draw[        decoration={markings, mark=at position 0.8 with {\arrow{<}}}, postaction={decorate}        ]  (-.8,.5) -- (-.8, -.5);
\draw (0.7,-0.4) node  {$\scriptstyle{k+1}$};
\draw[
        decoration={markings, mark=at position 0.8 with {\arrow{<}}},
        postaction={decorate}
        ]  (.3,.5) -- (.3, -.5);
\arc{.5}{.4}{-.3}{}{<}
%\circles{1}{0.1}{\scriptstyle{k+1}}{>}
\betaP{1}{0.1}{\scriptstyle{k+1}}
\end{tikzpicture}
\end{align*}

\end{proof}
